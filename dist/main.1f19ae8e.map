{"version":3,"sources":["vdom/createElement.js","vdom/render.js","vdom/mount.js","vdom/diff.js","main.js"],"names":["tagName","attrs","children","vElem","Object","create","assign","renderElem","$el","document","createElement","entries","k","v","setAttribute","child","appendChild","render","vNode","createTextNode","$node","$target","replaceWith","zip","xs","ys","zipped","i","Math","min","length","push","diffAttrs","oldAttrs","newAttrs","patches","removeAttribute","patch","diffChildren","oldVChildren","newVChildren","childPatches","forEach","oldVChild","diff","additionalPatches","slice","additionalVChild","$parent","childNodes","$child","oldVTree","newVTree","undefined","remove","$newNode","patchAttrs","patchChildren","createVApp","count","id","dataCount","String","src","vApp","$app","$rootEl","getElementById","setInterval","floor","random","vNewApp"],"mappings":"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","file":"main.1f19ae8e.map","sourceRoot":"../src","sourcesContent":["/*export default (tagName, { attrs = {}, children = [] } = {}) => {\n    return{\n        tagName,\n        attrs,\n        children,\n    };\n};\n\n*/\n\n//Making the DOM purer using the Object.create(null)\n//This creates a truly plain object that doesn't inherit from Object but null instead\n\nexport default (tagName, { attrs = {}, children = [] } = {}) => {\n    const vElem = Object.create(null);\n\n    Object.assign(vElem, {\n        tagName,\n        attrs,\n        children,\n    });\n    \n    return vElem;\n};","const renderElem = ({tagName, attrs, children}) => {\n\n    //Element creation\n    const $el = document.createElement(tagName);\n\n    //Adding all the attributes attributed to vNode.attrs\n    //eg. <div id=\"app\"></div>\n\n    for (const [k, v] of Object.entries(attrs)){\n        $el.setAttribute(k, v);\n    }\n\n    //append all children as specified in vNode.children\n    //eg. <div id=\"app\"><img><div>\n\n    for (const child of children) {\n        $el.appendChild(render(child));\n    }\n\n    return $el;\n\n};\n\n\nconst render = (vNode) => {\n    if (typeof vNode === 'string'){\n        return document.createTextNode(vNode);\n    }\n\n    return renderElem(vNode);\n};\n\n\nexport default render;","export default ($node, $target) => {\n    $target.replaceWith($node);\n    return $node;\n};","import render from './render';\n\n\n\nconst zip = (xs, ys) => {\n    const zipped = [];\n    for (let i = 0; i < Math.min(xs.length, ys.length); i++){\n        zipped.push(xs[i], ys[i]);\n    }\n\n    return zipped;\n};\n\nconst diffAttrs = (oldAttrs, newAttrs) => {\n    const patches = [];\n\n    //setting newAttrs\n    for (const [k, v] of Object.entries(newAttrs)){\n        patches.push($node => {\n            $node.setAttribute(k, v);\n            return $node\n        });\n    }\n\n    // removing attrs\n    for (const k in oldAttrs){\n        if(!(k in newAttrs)){\n            patches.push($node => {\n                $node.removeAttribute(k);\n                return $node;\n            });\n        }\n    }\n\n\n\n    return $node => {\n        for (const patch of patches){\n            patch($node);\n        }\n        //return $node;\n    };\n};\n\n\nconst diffChildren = (oldVChildren, newVChildren) => {\n    const childPatches = [];\n\n    oldVChildren.forEach((oldVChild, i) => {\n        childPatches.push(diff(oldVChild, newVChildren[i]));        \n    });\n\n\n    const additionalPatches = [];\n    for (const additionalVChild of newVChildren.slice(oldVChildren.length)){\n        additionalPatches.push($node => {\n            $node.appendChild(render(newVChildren));\n            return $node;\n        });\n    }\n\n    return $parent => {\n        $parent.childNodes.forEach(($child, i) => {\n            childPatches[i]($child);\n        });\n\n        for (const patch of additionalPatches){\n            patch($parent);\n        }\n\n        return $parent;\n    };\n    /*return $node => {\n        return $node;\n    };\n\n    */\n};\n\nconst diff = (oldVTree, newVTree) => {\n    //assume oldVTree is not defined\n    if (newVTree === undefined){\n        return $node => {\n            $node.remove();\n            //The patch returns the new root node, since there is none in case undefined is returned\n            return undefined;\n        }\n    }\n\n    if (typeof oldVTree === 'string' || typeof newVTree == 'string'){\n        if (oldVTree !== newVTree){\n            //2 cases are existent here\n            //1. both trees are string and they have different values\n            //2. one of the trees is text node and the other one is elem node\n            // Either case render(newVTree)\n            return $node => {\n                const $newNode = render(newVTree);\n                $node.replaceWith($newNode);\n                return $newNode;\n            };\n        } else{\n            //both trees are strings and they have the same values\n            return $node => $node;\n        }\n    }\n\n    if (oldVTree.tagName !== newVTree.tagName){\n        //assume that they are totally different\n        return $node => {\n            const $newNode = render(newVTree);\n            $node.replaceWith($newNode);\n            return $newNode;\n        };\n    }\n\n\n    const patchAttrs = diffAttrs(oldVTree.attrs, newVTree.attrs);\n    const patchChildren = diffChildren(oldVTree.children, newVTree.children);\n\n    return $node => {\n        patchAttrs($node);\n        patchChildren($node);\n        return $node;\n    };\n};\n\nexport default diff;","import createElement from './vdom/createElement';\nimport render from './vdom/render';\nimport mount from './vdom/mount';\nimport diff from './vdom/diff';\n\n\nconst createVApp = count => createElement('div', {\n    attrs: {\n        id: 'app',\n        dataCount: count,\n    },\n    children: [\n        'The current count is: ', //represents TextNode\n        String(count),\n        createElement('img', {\n            attrs: {\n                src: 'https://media.giphy.com/media/cuPm4p4pClZVC/giphy.gif',\n            },\n        }), //represents Element Node\n    ],\n}); //represent Element Node\n\n/*const vApp = {\n    tagName: 'div',\n    attrs: {\n        id: 'app',\n    },\n};\n*/\n\nlet count = 0;\nconst vApp = createVApp(count);\nconst $app = render(vApp);\n\n\nlet $rootEl = mount($app, document.getElementById('app'));\n\nsetInterval(() => {\n    //count++;\n    //const \n    count = Math.floor(Math.random() * 10);\n    const vNewApp = createVApp(count);\n    const patch = diff(vApp, vNewApp);\n\n\n    //$rootEl = mount(render(createVApp(count)), $rootEl);\n\n    $rootEl = patch($rootEl);\n    \n    vApp = vNewApp;\n}, 1000);\n\n//console.log($app);\n\n//Mount $app to the empty div\n//mount($app, document.getElementById('app'));\n\n\n\n\n"]}